package co.edu.uniquindio.estructurasDatos.ProyectoFinal.controllers;

import co.edu.uniquindio.estructurasDatos.ProyectoFinal.model.Aerolinea;
import co.edu.uniquindio.estructurasDatos.ProyectoFinal.persistencia.Persistencia;

public class ModelFactoryController {

	//Atributos de la clase ModelFactoryController

	Aerolinea marketOnline;


	//----------------------------------------------  Singleton ------------------------------------------------
	// Clase estatica oculta. Tan solo se instanciara el singleton una vez
	private static class SingletonHolder {
		// El constructor de Singleton puede ser llamado desde aquí al ser protected
		private final static ModelFactoryController eINSTANCE = new ModelFactoryController();
	}

	// Método para obtener la instancia de nuestra clase
	public static ModelFactoryController getInstance() {
		return SingletonHolder.eINSTANCE;
	}
	//-------------------------------------------Constructor-de-la-Clase-----------------------------------------

	/**
	 * Este es el meotodo constructor de la clase ModelFactoryController
	 */
	public ModelFactoryController() {
		System.out.println("invocación clase singleton");

		//Inicializar datos y luego guardarlo en archivos
	//	inicializarSalvarDatosPrueba();

		//Cargar lso datos de los archivos
	//	cargarDatosDesdeArchivos();

		//Guardar y Cargar el recurso serializable binario
	//	guardarResourceBinario();
	//	cargarResourceBinario();


		//Guardar y cargar el recurso serializable XML
	//	guardarResourceXML();
		cargarResourceXML();

		try {
			Persistencia.guardarUsuarios(getMarketOnline().getListaUsuarios());
			Persistencia.guardarVendedores(getMarketOnline().getListaVendedor());
			Persistencia.guardarProductos(getMarketOnline().getListaVendedor());
		} catch (IOException e) {
			e.printStackTrace();
		}

		if(marketOnline == null){
			System.out.println("Aerolinea es null");

		}
	}

	private void cargarResourceXML() {

		marketOnline = Persistencia.cargarRecursoMarketplaceXML();

	}

	private void guardarResourceXML() {

		Persistencia.guardarRecursoMarketplaceXML(marketOnline);
	}
}
